{"version":3,"file":"pages/admin/reserve/_id/index.js","sources":["webpack:///./pages/admin/reserve/_id/index.vue?46c1","webpack:///./pages/admin/reserve/_id/index.vue","webpack:///./pages/admin/reserve/_id/index.vue?8840","webpack:///./pages/admin/reserve/_id/index.vue?3bf9","webpack:///./components/pages/reserve/ReserveForm.vue?42ad","webpack:///./components/pages/reserve/ReserveForm.vue","webpack:///./components/pages/reserve/ReserveForm.vue?fe61","webpack:///./components/pages/reserve/ReserveForm.vue?d14b"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"content-header\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row mb-2\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-sm-6\\\"><h1 class=\\\"m-0 text-dark\\\">แก้ไขรายการจอง</h1></div> \"),_vm._ssrNode(\"<div class=\\\"col-sm-6\\\">\",\"</div>\",[_vm._ssrNode(\"<ol class=\\\"breadcrumb float-sm-right\\\">\",\"</ol>\",[_vm._ssrNode(\"<li class=\\\"breadcrumb-item\\\">\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/admin/news\"}},[_vm._v(\"หน้าแรก\")])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<li class=\\\"breadcrumb-item\\\">\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/admin/reserve\"}},[_vm._v(\"เเสดงรายการจอง\")])],1),_vm._ssrNode(\" <li class=\\\"breadcrumb-item active\\\">แก้ไขรายการจอง</li>\")],2)])],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<section class=\\\"content\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_c('ReserveForm',{attrs:{\"reserve\":_vm.reservePost,\"zone\":_vm.loadZoneData},on:{\"reserveData\":_vm.onSubmitted}})],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport ReserveForm from \"@/components/pages/reserve/ReserveForm\";\r\nimport axios from 'axios'\r\n\r\n\r\nexport default {\r\n    layout:\"adminLayout\",\r\n    components:{\r\n        ReserveForm\r\n    },\r\n    asyncData(context){ \r\n        return axios.get(\"https://service.candlesfest.com/api/reserve/find/id/\"+context.params.id)\r\n            .then(res=>{\r\n                return {\r\n                    reservePost:{\r\n                        ...res.data.reserve\r\n                    }\r\n                }\r\n            }\r\n        ).catch(e=>context.error(e));\r\n    },\r\n    methods:{\r\n        onSubmitted(reserve){ \r\n            $('#loading-modal').modal('show'); \r\n            this.$store.dispatch(\"editReserve\", reserve)\r\n            .then(()=>{\r\n              setTimeout(() => {\r\n                this.$router.push(\"/admin/reserve\");\r\n                $('#loading-modal').modal('hide');\r\n                toastr.info('แก้ไขข้อมูลเรียบร้อยเเล้ว');\r\n              }, 1500); \r\n            })\r\n            .catch(error => { \r\n              $('#loading-modal').modal('hide');\r\n              toastr.error('ไม่สามารถเเก้ไขข้อมูลได้'); \r\n              console.log('error ' , error);\r\n            });\r\n        } \r\n    },\r\n    fetch({ store, params }) { \r\n      if (!store.state.zoneData || store.state.zoneData.length==0) { \r\n        return store.dispatch('initZone');\r\n      }\r\n    },\r\n    computed:{ \r\n      loadZoneData(){\r\n        var data = [];\r\n        if(this.$store.getters.getAllZone){\r\n          data = this.$store.getters.getAllZone;\r\n        }\r\n        return data;   \r\n      }\r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7d1de8b0&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"e9288162\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row reserve\"},[_vm._ssrNode(\"<div class=\\\"col-md-12\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\" data-v-332268fa><h3 class=\\\"card-title\\\" data-v-332268fa>เพิ่มรายการจองใหม่</h3></div> \"),_vm._ssrNode(\"<form id=\\\"reserveForm\\\" role=\\\"form\\\" data-v-332268fa>\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"card-body\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-sm-6\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-group\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"zone_id\\\" data-v-332268fa>โซน</label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.zone_id),expression:\"form.zone_id\"}],staticClass:\"form-control\",attrs:{\"name\":\"zone_id\",\"id\":\"zone_id\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"zone_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"กรุณาเลือก\")]),_vm._v(\" \"),_vm._l((_vm.zone),function(item){return _c('option',{key:item.id,domProps:{\"value\":item.id}},[_vm._v(_vm._s(item.topic))])})],2)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"col-sm-6\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-group\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"title\\\" data-v-332268fa>คำนำหน้า</label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.title),expression:\"form.title\"}],staticClass:\"form-control\",attrs:{\"name\":\"title\",\"id\":\"title\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"title\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"กรุณาเลือก\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"นาย\"}},[_vm._v(\"นาย\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"นาง\"}},[_vm._v(\"นาง\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"นางสาว\"}},[_vm._v(\"นางสาว\")])])],2)])],2),_vm._ssrNode(\" <div class=\\\"row\\\" data-v-332268fa><div class=\\\"col-sm-6\\\" data-v-332268fa><div class=\\\"form-group\\\" data-v-332268fa><label for=\\\"first_name\\\" data-v-332268fa>ชื่อ</label> <input type=\\\"text\\\" name=\\\"first_name\\\" id=\\\"first_name\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.first_name)))+\" class=\\\"form-control\\\" data-v-332268fa></div></div> <div class=\\\"col-sm-6\\\" data-v-332268fa><div class=\\\"form-group\\\" data-v-332268fa><label for=\\\"last_name\\\" data-v-332268fa>นามสกุล</label> <input type=\\\"text\\\" name=\\\"last_name\\\" id=\\\"last_name\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.last_name)))+\" class=\\\"form-control\\\" data-v-332268fa></div></div></div> <div class=\\\"row\\\" data-v-332268fa><div class=\\\"col-sm-6\\\" data-v-332268fa><div class=\\\"form-group\\\" data-v-332268fa><label for=\\\"mobile\\\" data-v-332268fa>เบอร์มือถือ</label> <input type=\\\"text\\\" name=\\\"mobile\\\" id=\\\"mobile\\\" maxlength=\\\"10\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.mobile)))+\" class=\\\"form-control\\\" data-v-332268fa></div></div> <div class=\\\"col-sm-6\\\" data-v-332268fa><div class=\\\"form-group\\\" data-v-332268fa><label for=\\\"amount\\\" data-v-332268fa>จำนวนที่นั่ง</label> <input type=\\\"number\\\" name=\\\"amount\\\" id=\\\"amount\\\" min=\\\"0\\\" max=\\\"1000\\\" step=\\\"1\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.amount)))+\" class=\\\"form-control\\\" data-v-332268fa></div></div></div> \"),_vm._ssrNode(\"<div class=\\\"row\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-sm-6\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-group\\\" data-v-332268fa>\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"status\\\" data-v-332268fa>สถานะ</label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.status),expression:\"form.status\"}],staticClass:\"form-control\",attrs:{\"name\":\"status\",\"id\":\"status\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"status\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"P\"}},[_vm._v(\"กำลังดำเนินการ\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"A\"}},[_vm._v(\"อนุมัติ\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"I\"}},[_vm._v(\"ไม่อนุมัติ\")])])],2)])])],2),_vm._ssrNode(\" <div class=\\\"card-footer text-center\\\" data-v-332268fa><button type=\\\"submit\\\" class=\\\"btn btn-secondary\\\" data-v-332268fa>บันทึก</button> <button type=\\\"reset\\\" class=\\\"btn btn-default\\\" data-v-332268fa>ล้างข้อมูล</button></div>\")],2)],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n    \r\n \r\nexport default {\r\n   data(){  \r\n      return{ \r\n          form:this.reserve?\r\n          {\r\n              ...this.reserve\r\n          }\r\n          :\r\n          {\r\n              zone_id:\"\",\r\n              title:\"\", \r\n              first_name:\"\",\r\n              last_name:\"\",\r\n              mobile:\"\",\r\n              amount:\"0\",\r\n              status:\"A\",\r\n          }\r\n      }\r\n\r\n    },\r\n    mounted: function(){    \r\n\r\n      $('#reserveForm').validate({\r\n          rules: {\r\n            zone_id: {\r\n              required: true \r\n            },\r\n            title: {\r\n              required: true\r\n            },\r\n            first_name: {\r\n              required: true\r\n            },\r\n            last_name: {\r\n              required: true\r\n            },\r\n            mobile: {\r\n              required: true,\r\n              maxlength: 10,\r\n              minlength: 10,\r\n              digits: true\r\n            } \r\n          },\r\n          messages: {\r\n            zone_id: {\r\n              required: \"กรุณาเลือกโซน\"\r\n            }, \r\n            title: {\r\n              required: \"กรุณาเลือกคำนำหน้า\"\r\n            },\r\n            first_name: {\r\n              required: \"กรุณาระบุชื่อ\"\r\n            },\r\n            last_name: {\r\n              required: \"กรุณาระบุนามสกุล\"\r\n            },\r\n            mobile: {\r\n              required: \"กรุณาระบุเบอร์มือถือ\",\r\n              maxlength: \"ขนาดเบอร์มือถือต้อง 10 หลักเท่านั้น\",\r\n              minlength: \"ขนาดเบอร์มือถือต้อง 10 หลักเท่านั้น\",\r\n              digits: \"จำนวนที่นั่งต้องเป็นตัวเลขเท่านั้น\"\r\n            } \r\n          },\r\n          errorElement: 'span',\r\n          errorPlacement: function (error, element) {\r\n            error.addClass('invalid-feedback');\r\n            element.closest('.form-group').append(error);\r\n          },\r\n          highlight: function (element, errorClass, validClass) {\r\n            $(element).addClass('is-invalid');\r\n          },\r\n          unhighlight: function (element, errorClass, validClass) {\r\n            $(element).removeClass('is-invalid');\r\n          },\r\n          ignore: \".note-editor *\"\r\n        });\r\n \r\n    },  \r\n    props:{\r\n      reserve:{\r\n          type:Object,\r\n          required:false\r\n      },\r\n      zone:{\r\n          type:Array,\r\n          required:false\r\n      }\r\n    },\r\n    methods:{   \r\n      onSubmit(evt){    \r\n          if($(\"#reserveForm\").valid()){\r\n            this.$emit('reserveData', this.form); \r\n          }else{\r\n            console.log(\"validate is failed\");\r\n          }\r\n      },\r\n      onReset(evt){ \r\n        evt.preventDefault(); \r\n        this.form.zone_id=\"\";\r\n        this.form.title=\"\"; \r\n        this.form.first_name=\"\";\r\n        this.form.last_name=\"\";\r\n        this.form.mobile=\"\";\r\n        this.form.amount=\"0\";\r\n        this.form.status=\"A\";\r\n      }\r\n    }\r\n}\r\n\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReserveForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReserveForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReserveForm.vue?vue&type=template&id=332268fa&scoped=true&\"\nimport script from \"./ReserveForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ReserveForm.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"332268fa\",\n  \"4efd728e\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AADA;AAKA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAjBA;AACA;AAiBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AARA;AAvCA;;AC5CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AANA;AAiBA;AACA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAJA;AAbA;AAoBA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAJA;AAbA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AAuDA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAxFA;;AC/FA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}