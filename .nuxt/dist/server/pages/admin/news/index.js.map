{"version":3,"file":"pages/admin/news/index.js","sources":["webpack:///./pages/admin/news/index.vue?2f02","webpack:///./components/pages/news/NewsList.vue?b63c","webpack:///./components/pages/news/NewsList.vue","webpack:///./components/pages/news/NewsList.vue?b47e","webpack:///./components/pages/news/NewsList.vue?24f4","webpack:///./pages/admin/news/index.vue","webpack:///./pages/admin/news/index.vue?56b9","webpack:///./pages/admin/news/index.vue?b09c"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"content-header\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row mb-2\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-sm-6\\\"><h1 class=\\\"m-0 text-dark\\\">ข่าวสาร</h1></div> \"),_vm._ssrNode(\"<div class=\\\"col-sm-6\\\">\",\"</div>\",[_vm._ssrNode(\"<ol class=\\\"breadcrumb float-sm-right\\\">\",\"</ol>\",[_vm._ssrNode(\"<li class=\\\"breadcrumb-item\\\">\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/admin/news\"}},[_vm._v(\"หน้าแรก\")])],1),_vm._ssrNode(\" <li class=\\\"breadcrumb-item active\\\">เเสดงข่าวสาร</li>\")],2)])],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<section class=\\\"content\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_c('NewsList',{attrs:{\"news\":_vm.loadData},on:{\"deleteData\":_vm.onDeleted}})],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"row\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-12\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-header\\\"><h3 class=\\\"card-title\\\">ข่าวสารทั้งหมด</h3></div> \"),_vm._ssrNode(\"<div class=\\\"card-body\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-12 float-left clearfix\\\">\",\"</div>\",[_c('nuxt-link',{staticClass:\"btn btn-info btn-sm\",attrs:{\"to\":\"/admin/news/create\"}},[_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" เพิ่มข่าวสาร\")])],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"card-body\\\" style=\\\"padding-top:0px;\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-12 table-container\\\">\",\"</div>\",[_vm._ssrNode(\"<table id=\\\"news-table\\\" class=\\\"table table-bordered table-hover\\\">\",\"</table>\",[_vm._ssrNode(\"<thead><tr><th class=\\\"text-center\\\" style=\\\"width: 5%\\\">ลำดับ</th> <th class=\\\"text-left\\\" style=\\\"width: 40%\\\">หัวข้อ</th> <th class=\\\"text-left\\\" style=\\\"width: 10%\\\">ผู้เขียน</th> <th class=\\\"text-center\\\" style=\\\"width: 20%\\\">วันที่บันทึก</th> <th class=\\\"text-center\\\" style=\\\"width: 25% !important\\\">#</th></tr></thead> \"),_vm._ssrNode(\"<tbody>\",\"</tbody>\",_vm._l((_vm.news),function(item,index){return _vm._ssrNode(\"<tr\"+(_vm._ssrAttr(\"index\",index))+\">\",\"</tr>\",[_vm._ssrNode(\"<td class=\\\"text-center\\\">\"+_vm._ssrEscape(_vm._s(index + 1))+\"</td> <td class=\\\"text-left\\\">\"+_vm._ssrEscape(_vm._s(item.topic.length>100 ? item.topic.slice(0,100)+\"...\" : item.topic))+\"</td> <td class=\\\"text-left\\\">\"+_vm._ssrEscape(\"\\n                    \"+_vm._s(item.author ? item.author : \"\")+\"\\n                  \")+\"</td> <td class=\\\"text-center\\\">\"+_vm._ssrEscape(_vm._s(_vm._f(\"moment\")(item.update_dttm)))+\"</td> \"),_vm._ssrNode(\"<td class=\\\"project-actions text-center\\\">\",\"</td>\",[_c('nuxt-link',{staticClass:\"btn btn-info btn-sm\",attrs:{\"to\":{ path: 'news/'+item.id}}},[_c('i',{staticClass:\"fas fa-pencil-alt\"}),_vm._v(\"\\n                      แก้ไข\\n                    \")]),_vm._ssrNode(\" <a class=\\\"btn btn-danger btn-sm\\\"><i class=\\\"fas fa-trash\\\"></i>\\n                      ลบ\\n                    </a>\")],2)],2)}),0)],2)])])],2)])]),_vm._ssrNode(\" <div id=\\\"modal-delete-news\\\" class=\\\"modal fade\\\"><div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\">ข้อความเเจ้งเตือน</h4> <button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\" class=\\\"close\\\"><span aria-hidden=\\\"true\\\">×</span></button></div> <div class=\\\"modal-body\\\"><p>ต้องการลบรายการใช่หรือไม่ ?</p></div> <div class=\\\"modal-footer\\\"><button type=\\\"button\\\" class=\\\"btn btn-info\\\">ตกลง</button> <button type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-default\\\">ยกเลิก</button></div></div></div></div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport moment from \"moment\"; \r\n\r\nexport default { \r\n  data(){  \r\n    return{ \r\n      id:\"\"\r\n    }  \r\n  },\r\n  mounted: function () {\r\n    $(\"#news-table\").DataTable({    \r\n      paging: true,\r\n      lengthChange: false,\r\n      searching: true,\r\n      ordering: false,\r\n      info: true,\r\n      autoWidth: true,\r\n      responsive: true, \r\n      lengthMenu: [[10, 25, 50, -1], [10, 25, 50, \"All\"]],\r\n      language: { \r\n        info: \"เเสดง _START_ ถึง _END_ ของ _TOTAL_ รายการ\",\r\n        infoEmpty: \"แสดง 0 ถึง 0 ของ 0 รายการ\", \r\n        lengthMenu: \"เเสดง _MENU_ รายการ\",\r\n        loadingRecords: \"กำลังโหลด...\",\r\n        processing: \"ประมวลผล...\",\r\n        search: \"ค้นหา:\", \r\n        emptyTable: \"ไม่พบข้อมูล\",\r\n        paginate: {\r\n          previous: \"ก่อนหน้า\",\r\n          next: \"ถัดไป\",\r\n          first: \"เเรกสุด\",\r\n          last: \"สุดท้าย\",   \r\n          infoEmpty: \"ไม่พบข้อมูล\", \r\n        }\r\n      } \r\n\r\n    });\r\n  },\r\n  methods: {\r\n    moment: function () {\r\n      return moment();\r\n    },\r\n    alertDeleteNews(id){ \r\n      this.id = id;\r\n      $('#modal-delete-news').modal(\"show\"); \r\n    },\r\n    confirmDeleteNews(id){ \r\n      $('#modal-delete-news').modal(\"hide\");\r\n      this.$emit('deleteData', id);\r\n    }\r\n  },\r\n  props: {\r\n    news: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  filters: {\r\n    moment: function (date) {\r\n      return moment(date).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    },\r\n  } \r\n};\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsList.vue?vue&type=template&id=2bbebd3e&\"\nimport script from \"./NewsList.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2ddefec8\"\n  \n)\n\nexport default component.exports","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nimport NewsList from \"@/components/pages/news/NewsList\";\r\nimport axios from 'axios'   \r\n\r\nexport default {\r\n  layout: \"adminLayout\",\r\n  components: { \r\n    NewsList,\r\n  }, \r\n  mounted() {   \r\n    this.$nextTick(() => {\r\n      $('#loading-modal').modal('show');\r\n      setTimeout(() => $('#loading-modal').modal('hide'), 1500)\r\n    })\r\n  },\r\n  fetch({ store, params }) {\r\n    if(!store.state.newsData || store.state.newsData.length==0){\r\n      return store.dispatch('initNews');\r\n    } \r\n  },\r\n  computed:{\r\n    loadData(){    \r\n      var data = [];\r\n      if(this.$store.getters.getAllNews){\r\n        data = this.$store.getters.getAllNews;\r\n      }\r\n      return data;  \r\n    }\r\n  },\r\n  methods:{\r\n      onDeleted(id){   \r\n          $('#loading-modal').modal('show'); \r\n          this.$store.dispatch(\"deleteNews\", id)\r\n          .then(()=>{ \r\n            setTimeout(() => {\r\n              $('#loading-modal').modal('hide'); \r\n              toastr.info('ลบข้อมูลเรียบร้อยเเล้ว');\r\n            }, 1500);  \r\n          })\r\n          .catch(error => {  \r\n            $('#loading-modal').modal('้hide'); \r\n            toastr.error('ไม่สามารถลบข้อมูลได้');\r\n            console.log('error ' , error);\r\n          });\r\n      } \r\n    }\r\n};\r\n \r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=84302f5a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"8642ea4c\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AARA;AATA;AA2BA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAZA;AAaA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AAHA;AAtDA;;ACxFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AARA;AASA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAzBA;;ACzCA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}