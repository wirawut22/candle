{"version":3,"file":"pages/admin/news/_id/index.js","sources":["webpack:///./pages/admin/news/_id/index.vue?6219","webpack:///./pages/admin/news/_id/index.vue","webpack:///./pages/admin/news/_id/index.vue?e87d","webpack:///./pages/admin/news/_id/index.vue?dc9f","webpack:///./components/pages/news/NewsForm.vue?5f6e","webpack:///./components/pages/news/NewsForm.vue?4f87","webpack:///./components/pages/news/NewsForm.vue?62a2","webpack:///./components/pages/news/NewsForm.vue?92b4","webpack:///./components/pages/news/NewsForm.vue","webpack:///./components/pages/news/NewsForm.vue?460d","webpack:///./components/pages/news/NewsForm.vue?82fe"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div class=\\\"content-header\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row mb-2\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-sm-6\\\"><h1 class=\\\"m-0 text-dark\\\">แก้ไขข่าวสาร</h1></div> \"),_vm._ssrNode(\"<div class=\\\"col-sm-6\\\">\",\"</div>\",[_vm._ssrNode(\"<ol class=\\\"breadcrumb float-sm-right\\\">\",\"</ol>\",[_vm._ssrNode(\"<li class=\\\"breadcrumb-item\\\">\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/admin/news\"}},[_vm._v(\"หน้าแรก\")])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<li class=\\\"breadcrumb-item\\\">\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/admin/news\"}},[_vm._v(\"เเสดงข่าวสาร\")])],1),_vm._ssrNode(\" <li class=\\\"breadcrumb-item active\\\">แก้ไขข่าวสาร</li>\")],2)])],2)])]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<section class=\\\"content\\\">\",\"</section>\",[_vm._ssrNode(\"<div class=\\\"container-fluid\\\">\",\"</div>\",[_c('NewsForm',{attrs:{\"news\":_vm.newsPost},on:{\"newsData\":_vm.onSubmitted}})],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport NewsForm from \"@/components/pages/news/NewsForm\";\r\nimport axios from 'axios'\r\n\r\n\r\nexport default {\r\n    layout:\"adminLayout\",\r\n    components:{\r\n        NewsForm\r\n    },\r\n    asyncData(context){ \r\n        return axios.get(\"https://service.candlesfest.com/api/news/find/id/\"+context.params.id)\r\n            .then(res=>{\r\n                return {\r\n                    newsPost:{\r\n                        ...res.data.news\r\n                    }\r\n                }\r\n            }\r\n        ).catch(e=>context.error(e));\r\n    },\r\n    methods:{\r\n        onSubmitted(news){ \r\n            $('#loading-modal').modal('show'); \r\n            this.$store.dispatch(\"editNews\", news)\r\n            .then(()=>{\r\n              setTimeout(() => {\r\n                this.$router.push(\"/admin/news\");\r\n                $('#loading-modal').modal('hide');\r\n                toastr.info('แก้ไขข้อมูลเรียบร้อยเเล้ว');\r\n              }, 1500); \r\n            })\r\n            .catch(error => { \r\n              $('#loading-modal').modal('hide');\r\n              toastr.error('ไม่สามารถเเก้ไขข้อมูลได้');\r\n              console.log('error ' , error);\r\n            });\r\n        } \r\n    }\r\n}\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7f2e53b9&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2a4b8b38\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsForm.vue?vue&type=style&index=0&id=13759776&scoped=true&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"25c280b2\", content, true, context)\n};","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsForm.vue?vue&type=style&index=0&id=13759776&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".product-image[data-v-13759776]{max-width:100%;max-height:500px;width:auto;border-radius:10px;padding:5px;border:1px solid #dee2e6;box-shadow:0 1px 2px rgba(0,0,0,.075)}.product-image-thumb[data-v-13759776]{cursor:pointer}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row news\"},[_vm._ssrNode(\"<div class=\\\"col-md-12\\\" data-v-13759776><div class=\\\"card\\\" data-v-13759776><div class=\\\"card-header\\\" data-v-13759776><h3 class=\\\"card-title\\\" data-v-13759776>เพิ่มข่าวสารใหม่</h3></div> <form id=\\\"newsForm\\\" role=\\\"form\\\" data-v-13759776><div class=\\\"card-body\\\" data-v-13759776><div class=\\\"form-group\\\" data-v-13759776><label for=\\\"topic\\\" data-v-13759776>หัวข้อ</label> <input type=\\\"text\\\" name=\\\"topic\\\" id=\\\"topic\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.topic)))+\" class=\\\"form-control\\\" data-v-13759776></div> <div class=\\\"form-group\\\" data-v-13759776><label for=\\\"author\\\" data-v-13759776>ผู้เขียน</label> <input type=\\\"text\\\" name=\\\"author\\\" id=\\\"author\\\" autocomplete=\\\"off\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.author)))+\" class=\\\"form-control\\\" data-v-13759776></div> <div class=\\\"form-group\\\" data-v-13759776><label for=\\\"image\\\" data-v-13759776>รูปภาพ</label> \"+((_vm.news)?(\"<div class=\\\"input-group\\\" data-v-13759776><div class=\\\"row\\\" data-v-13759776><div class=\\\"col-12\\\" data-v-13759776><div class=\\\"col-12\\\" data-v-13759776>\"+((!_vm.imageActive && _vm.news.image.length==0)?(\"<img src=\\\"/base/images/lazy.jpg\\\" max-height=\\\"500\\\" class=\\\"product-image\\\" data-v-13759776>\"):\"<!---->\")+\" \"+((!_vm.imageActive && _vm.news.image.length>0)?(\"<img\"+(_vm._ssrAttr(\"src\",_vm.news.image[0]))+\" max-height=\\\"500\\\" class=\\\"product-image\\\" data-v-13759776>\"):\"<!---->\")+\" \"+((_vm.imageActive)?(\"<img\"+(_vm._ssrAttr(\"src\",_vm.imageActive))+\" max-height=\\\"500\\\" class=\\\"product-image\\\" data-v-13759776>\"):\"<!---->\")+\"</div> <div class=\\\"col-12 product-image-thumbs\\\" data-v-13759776>\"+(_vm._ssrList((_vm.news.image),function(item){return (\"<div\"+(_vm._ssrAttr(\"index\",_vm.index))+\" class=\\\"product-image-thumb\\\" data-v-13759776><img\"+(_vm._ssrAttr(\"src\",item))+\" data-v-13759776></div>\")}))+\"</div></div></div></div>\"):(\"<div class=\\\"input-group\\\" data-v-13759776><div class=\\\"row\\\" data-v-13759776><div class=\\\"col-12\\\" data-v-13759776><div class=\\\"col-12\\\" data-v-13759776><img src=\\\"/base/images/lazy.jpg\\\" max-height=\\\"500\\\" class=\\\"product-image\\\" data-v-13759776></div></div></div></div>\"))+\" <div class=\\\"input-group mt-4\\\" data-v-13759776><div class=\\\"custom-file\\\" data-v-13759776><input type=\\\"file\\\" id=\\\"file\\\" multiple=\\\"multiple\\\" placeholder=\\\"เลือกรูปภาพ\\\" class=\\\"custom-file-input\\\" data-v-13759776> <label for=\\\"image\\\" class=\\\"custom-file-label\\\" data-v-13759776></label> <input type=\\\"text\\\" id=\\\"newImage\\\" name=\\\"newImage\\\" data-v-13759776></div> <div class=\\\"input-group-append\\\" data-v-13759776><span id class=\\\"input-group-text\\\" data-v-13759776>อัพโหลด</span></div></div></div> <div class=\\\"form-group\\\" data-v-13759776><label for=\\\"รายละเอียด\\\" data-v-13759776>รายละเอียด(Mobile App)</label> <textarea name=\\\"description2\\\" id=\\\"description2\\\" autocomplete=\\\"off\\\" rows=\\\"5\\\" class=\\\"form-control\\\" data-v-13759776>\"+_vm._ssrEscape(_vm._s(_vm.form.description2))+\"</textarea></div> <div class=\\\"form-group\\\" data-v-13759776><label for=\\\"description1\\\" data-v-13759776>รายละเอียด(Web Site)</label> <div class=\\\"pad\\\" data-v-13759776><textarea id=\\\"description1\\\" placeholder=\\\"Place some text here\\\" class=\\\"textarea\\\" style=\\\"width: 100%; height: 700px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;\\\" data-v-13759776>\"+_vm._ssrEscape(_vm._s(_vm.form.description1))+\"</textarea></div></div></div> <div class=\\\"card-footer text-center\\\" data-v-13759776><button type=\\\"submit\\\" class=\\\"btn btn-secondary\\\" data-v-13759776>บันทึก</button> <button type=\\\"reset\\\" class=\\\"btn btn-default\\\" data-v-13759776>ล้างข้อมูล</button></div></form></div></div> <div id=\\\"modal-validate-news\\\" class=\\\"modal fade\\\" data-v-13759776><div class=\\\"modal-dialog\\\" data-v-13759776><div class=\\\"modal-content\\\" data-v-13759776><div class=\\\"modal-header\\\" data-v-13759776><h4 class=\\\"modal-title\\\" data-v-13759776>ข้อความเเจ้งเตือน</h4> <button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\" class=\\\"close\\\" data-v-13759776><span aria-hidden=\\\"true\\\" data-v-13759776>×</span></button></div> <div class=\\\"modal-body\\\" data-v-13759776><p data-v-13759776>กรุณาเลือกไฟล์(นามสกุลไฟล์ต้องเป็น jpg|jpeg|png|gif เท่านั้น)</p></div> <div class=\\\"modal-footer\\\" data-v-13759776><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-info\\\" data-v-13759776>ตกลง</button></div></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n    \r\n \r\nexport default {\r\n   data(){   \r\n      return{\r\n          imageActive: \"\",\r\n          form:this.news?\r\n          {\r\n              ...this.news\r\n          }\r\n          :\r\n          {\r\n              topic:\"\",\r\n              description1:\"\",\r\n              description2:\"\",\r\n              image:\"\",\r\n              author:\"\" \r\n          }\r\n      }\r\n\r\n    },\r\n    computed:{ \r\n\r\n    },\r\n    mounted: function(){   \r\n      //เซต image value เเยกเมื่อ page load \r\n      if(this.news && this.news.image){\r\n        var imageStr = this.news.image.toString(); \r\n        this.setFileNameInit(imageStr.slice(0,100)+\"...\", imageStr);\r\n      } \r\n\r\n      $('#newsForm').validate({\r\n          rules: {\r\n            topic: {\r\n              required: true,\r\n              maxlength: 500 \r\n            } \r\n          },\r\n          messages: {\r\n            topic: {\r\n              required: \"กรุณากรอกหัวข้อ\",\r\n              maxlength: \"ขนาดตัวอักษรต้องไม่เกิน 500 ตัวอักษร\" \r\n            } \r\n          },\r\n          errorElement: 'span',\r\n          errorPlacement: function (error, element) {\r\n            error.addClass('invalid-feedback');\r\n            element.closest('.form-group').append(error);\r\n          },\r\n          highlight: function (element, errorClass, validClass) {\r\n            $(element).addClass('is-invalid');\r\n          },\r\n          unhighlight: function (element, errorClass, validClass) {\r\n            $(element).removeClass('is-invalid');\r\n          },\r\n          ignore: \".note-editor *\"\r\n        });\r\n\r\n      $(\".textarea\").summernote({ height: 500, focus: false });\r\n    },  \r\n    props:{\r\n      news:{\r\n          type:Object,\r\n          required:false\r\n      } \r\n    },\r\n    methods:{ \r\n      handleFileUpload(){ \r\n        var fileNames = \"\";\r\n        const files = this.$refs.file.files;\r\n        for(var index=0;index<files.length;index++){  \r\n            if(index==0){\r\n              fileNames = fileNames + files[index].name;\r\n            }else{\r\n              fileNames = fileNames + \",\" + files[index].name;\r\n            }\r\n            \r\n        };   \r\n        $(\".custom-file-label\").text(fileNames.slice(0,100)+\"...\"); \r\n        \r\n      },\r\n      setFileNameInit(image, imageFull){ \r\n        $(\".custom-file-label\").text(image);  \r\n        $(\"#newImage\").val(imageFull);//รูปเดิม\r\n      },\r\n      setActiveImage(item){ \r\n        this.imageActive = item; \r\n      },\r\n      onSubmit(evt){ \r\n          const files = this.$refs.file.files; \r\n          this.form.image = files;\r\n          this.form.description1 = $(\"#description1\").summernote(\"code\");\r\n          this.form.newImage = $(\"#newImage\").val();\r\n \r\n          if($(\"#newsForm\").valid()){//validate other\r\n            this.$emit('newsData', this.form); \r\n          }else{\r\n            console.log(\"validate is failed\");\r\n          }\r\n      },\r\n      onReset(evt){ \r\n        evt.preventDefault();\r\n        this.form.topic=\"\";\r\n        this.form.description1=\"\"; \r\n        this.form.description2=\"\";\r\n        $(\".custom-file-label\").text(\"\");//custom clear \r\n        this.form.author=\"\";\r\n      }\r\n    }\r\n}\r\n\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsForm.vue?vue&type=template&id=13759776&scoped=true&\"\nimport script from \"./NewsForm.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsForm.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./NewsForm.vue?vue&type=style&index=0&id=13759776&scoped=true&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"13759776\",\n  \"0c345024\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AADA;AAKA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAhBA;;AC5CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AALA;AAPA;AAgBA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AA2BA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA1CA;AAhEA;;AChIA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}